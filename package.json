{
	"name": "twine-twee-language",
	"displayName": "Twine (Twee 3)",
	"description": "Twine (Twee 3) language support for VS Code, including Chapbook and SugarCube story formats.",
	"author": {
		"name": "Stephen Granade",
		"email": "stephen@granades.com",
		"url": "https://github.com/sgranade"
	},
	"license": "MIT",
	"version": "0.2.0",
	"repository": {
		"type": "git",
		"url": "https://github.com/sgranade/twine-twee-language"
	},
	"publisher": "StephenGranade",
	"categories": [
		"Programming Languages",
		"Linters",
		"Snippets"
	],
	"keywords": [
		"Twine",
		"Twee",
		"Chapbook",
		"SugarCube",
		"cyoa",
		"interactive fiction"
	],
	"engines": {
		"vscode": "^1.75.0"
	},
	"icon": "images/icon.png",
	"capabilities": {
		"untrustedWorkspaces": {
			"supported": true
		},
		"virtualWorkspaces": {
			"supported": false,
			"description": "Only works with local file paths."
		}
	},
	"activationEvents": [
		"workspaceContains:**/*.{tw,twee}"
	],
	"main": "./dist/client/src/extension",
	"contributes": {
		"languages": [
			{
				"id": "twee3",
				"aliases": [
					"Twee3",
					"twee3",
					"tw"
				],
				"extensions": [
					".tw",
					".twee"
				],
				"configuration": "./syntaxes/twee3.language-configuration.json"
			},
			{
				"id": "twee3-chapbook-2",
				"aliases": [
					"Twee3-Chapbook-2"
				],
				"extensions": [
					".tw",
					".twee"
				],
				"configuration": "./syntaxes/twee3.language-configuration.json"
			},
			{
				"id": "twee3-sugarcube-2",
				"aliases": [
					"Twee3-SugarCube-2"
				],
				"extensions": [
					".tw",
					".twee"
				],
				"configuration": "./syntaxes/twee3.sugarcube-2.language-configuration.json"
			}
		],
		"grammars": [
			{
				"language": "twee3",
				"scopeName": "source.twee3",
				"path": "./syntaxes/twee3.tmLanguage.json",
				"embeddedLanguages": {
					"source.json.twee3": "json",
					"source.js.twee3": "javascript",
					"source.css.twee3": "css",
					"source.html.twee3": "html"
				}
			},
			{
				"language": "twee3-chapbook-2",
				"scopeName": "source.twee3.chapbook-2",
				"path": "./syntaxes/twee3.chapbook-2.tmLanguage.json",
				"embeddedLanguages": {
					"source.json.twee3": "json",
					"source.yaml.twee3": "yaml",
					"source.js.twee3": "javascript",
					"source.css.twee3": "css",
					"source.html.twee3": "html"
				}
			},
			{
				"language": "twee3-sugarcube-2",
				"scopeName": "source.twee3.sugarcube-2",
				"path": "./syntaxes/twee3.sugarcube-2.tmLanguage.json",
				"embeddedLanguages": {
					"source.json.twee3": "json",
					"source.yaml.twee3": "yaml",
					"source.js.twee3": "javascript",
					"source.css.twee3": "css",
					"source.html.twee3": "html"
				}
			}
		],
		"commands": [
			{
				"command": "twineTweeLanguage.buildGame",
				"title": "Build Game",
				"category": "Twine (Twee 3) Language",
				"enablement": "isWorkspaceTrusted"
			},
			{
				"command": "twineTweeLanguage.buildGameTest",
				"title": "Build Game (Test Mode)",
				"category": "Twine (Twee 3) Language",
				"enablement": "isWorkspaceTrusted"
			},
			{
				"command": "twineTweeLanguage.downloadStoryFormat",
				"title": "Download Story Format",
				"category": "Twine (Twee 3) Language",
				"enablement": "isWorkspaceTrusted"
			}
		],
		"menus": {
			"commandPalette": [
				{
					"command": "twineTweeLanguage.buildGame",
					"when": "!twineTweeLanguage.building"
				},
				{
					"command": "twineTweeLanguage.buildGameTest",
					"when": "!twineTweeLanguage.building"
				},
				{
					"command": "twineTweeLanguage.downloadStoryFormat"
				}
			]
		},
		"configuration": {
			"title": "Twine (Twee 3) Language",
			"properties": {
				"twineTweeLanguage.twee-3.warnings.unknownMacro": {
					"type": "boolean",
					"default": "true",
					"description": "Warn about unrecognized macros (in SugarCube) or inserts and modifiers (in Chapbook)."
				},
				"twineTweeLanguage.twee-3.warnings.unknownPassage": {
					"type": "boolean",
					"default": "true",
					"markdownDescription": "Warn about references to unrecognized passages, such as in `[[passage]]` links."
				},
				"twineTweeLanguage.project.outputFile": {
					"type": "string",
					"default": "",
					"markdownDescription": "Name to give the game when turned into an HTML file, such as `story.html`. If blank, the game's filename will be its name from the `StoryTitle` passage, with spaces replaced by hyphens."
				},
				"twineTweeLanguage.project.create": {
					"type": "boolean",
					"default": true,
					"description": "Offer to create a project directory structure."
				},
				"twineTweeLanguage.project.downloadStoryFormat": {
					"type": "boolean",
					"default": true,
					"markdownDescription": "Offer to download the Twine story format used in a project. (Currently only supports [Chapbook](https://klembot.github.io/chapbook/) and [SugarCube 2](https://motoslave.net/sugarcube/2/).)"
				},
				"twineTweeLanguage.project.storyFilesDirectory": {
					"type": "string",
					"default": "src",
					"markdownDescription": "Directory with game source files (relative to the workspace). Files in this directory and all of its subdirectories will be compiled. Supports [all Tweego-supported files](http://www.motoslave.net/tweego/docs/#usage-supported-files) except for `.tw2`, `.twee2`, `.htm`, and `.html`."
				},
				"twineTweeLanguage.project.buildDirectory": {
					"type": "string",
					"default": "build",
					"markdownDescription": "Directory to put the output `.html` file in (relative to the workspace)."
				},
				"twineTweeLanguage.project.storyFormatsDirectory": {
					"type": "string",
					"default": ".storyformats",
					"description": "Directory relative to the root level of the project where Twine story formats are stored."
				}
			}
		},
		"taskDefinitions": [
			{
				"type": "twine",
				"required": ["test"],
				"properties": {
					"test": {
						"type": "boolean",
						"description": "Whether to build the Twine story in test mode."
					}
				}
			}
		]
	},
	"scripts": {
		"vscode:prepublish": "npm run package",
		"compile": "npm-run-all check-types prebuild esbuild",
		"prebuild": "node -p \"'export const CLIENT_VERSION = ' + JSON.stringify(require('./package.json').version) + ';'\" > client/src/version.ts",
		"esbuild": "node esbuild.js",
		"check-types": "tsc -b --noEmit",
		"watch": "npm-run-all -p watch:*",
    	"watch:esbuild": "npm run prebuild && node esbuild.js --watch",
    	"watch:tsc": "tsc -b --noEmit --watch",
		"package": "npm-run-all check-types prebuild \"esbuild -- --production\"",
		"test": "nyc mocha",
		"coverage": "nyc report --reporter=text-lcov > coverage.lcov",
		"lint": "eslint ./client/src ./server/src",
		"postinstall": "cd client && npm install && cd ../server && npm install && cd .."
	},
	"devDependencies": {
		"@eslint/js": "^9.3.0",
		"@types/chai": "^4.3.10",
		"@types/eslint__js": "^8.42.3",
		"@types/mocha": "^10.0.6",
		"@types/node": "^20.9.2",
		"@types/sinon": "^17.0.3",
		"chai": "^4.4.1",
		"esbuild": "^0.24.0",
		"eslint": "^9.3.0",
		"mocha": "^10.3.0",
		"npm-run-all": "^4.1.5",
		"nyc": "^17.0.0",
		"prettier": "^3.3.3",
		"sinon": "^19.0.2",
		"ts-mock-imports": "^1.3.8",
		"ts-node": "^10.9.2",
		"typescript": "^5.4.5",
		"typescript-eslint": "^8.0.0-alpha.10"
	}
}
